{"version":3,"sources":["components/Person.js","components/Persons.js","components/Filter.js","components/PersonForm.js","components/Notification.js","services/persons.js","App.js","index.js"],"names":["Person","person","deletePerson","name","number","onClick","Persons","personsToShow","map","id","Filter","newSearchString","handleSearchStringChange","value","onChange","PersonForm","newName","handleNameChange","newNumber","handleNumberChange","addPerson","onSubmit","type","Notification","message","className","baseUrl","axios","get","then","response","data","newObject","post","delete","put","App","useState","persons","setPersons","setNewName","setNewNumber","setNewSearchString","notificationMessage","setNotificationMessage","notificationType","setNotificationType","useEffect","personService","initialPersons","console","log","length","filter","toLowerCase","includes","event","target","preventDefault","currentPerson","window","confirm","oldId","changedPerson","returnedPerson","setTimeout","catch","error","concat","find","result","removedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.8490e7c6.chunk.js","sourcesContent":["import React from 'react' \n\nconst Person = ({ person, deletePerson }) => {\n  return (\n    <p>\n      {person.name} {person.number}\n      <button onClick={deletePerson}>Delete</button>\n    </p>\n  )\n}\n\nexport default Person","import React from 'react' \nimport Person from './Person'\n\nconst Persons = ({ personsToShow, deletePerson }) => {\n  return (\n    <div>\n      {personsToShow.map(person =>          \n        <Person key={person.name} person={person} deletePerson={() => deletePerson(person.id)}  />\n      )}\n    </div>\n  )\n}\n\nexport default Persons","import React from 'react' \n\nconst Filter = ({ newSearchString, handleSearchStringChange }) => {\n  return (\n    <div>\n      Filter shown with <input\n        value={newSearchString} \n        onChange={handleSearchStringChange} \n      />\n    </div>\n  )\n}\n\nexport default Filter","import React from 'react' \n\nconst PersonForm = ({ newName, handleNameChange, newNumber, handleNumberChange, addPerson }) => {\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name: <input \n          value={newName} \n          onChange={handleNameChange}\n        />\n      </div>\n      <div>\n        number: <input \n          value={newNumber} \n          onChange={handleNumberChange} \n        />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Notification = ({ message, className }) => {\n  if (message === null) {\n    return null\n  }\n  \n  return (\n    <div className={className}>\n      {message}\n    </div>\n  )\n}\n\nexport default Notification","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n  \nconst create = newObject => {\n  const request = axios.post(baseUrl, newObject)\n  return request.then(response => response.data)\n}\n\nconst remove = (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`)\n  return request.then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, remove, update } ","import React, { useState, useEffect } from 'react'\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm'\nimport Notification from './components/Notification'\nimport personService from './services/persons'\n\nconst App = () => {\n  const [persons, setPersons] = useState([]) \n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [newSearchString, setNewSearchString] = useState('')\n  const [notificationMessage, setNotificationMessage] = useState('')\n  const [notificationType, setNotificationType] = useState('')\n\n  useEffect(() => {\n    personService\n      .getAll()\n        .then(initialPersons => {        \n          setPersons(initialPersons)      \n        }) \n  }, [])\n  console.log('render', persons.length, 'persons')\n\n  const showError = (person) => {\n    console.log(\"Error, failed to update object with id \",person.id) \n    setNotificationType(\"error\")  \n    setNotificationMessage(          \n      `Information of ${person.name} was already removed from server`        \n    )        \n    setTimeout(() => {          \n      setNotificationMessage(null)        \n    }, 5000)   \n  }\n\n  const addPerson = (event) => {    \n    event.preventDefault()   \n    console.log('Add button clicked', event.target)  \n\n    //let pos = persons.findIndex(person => person.name === newName);\n    const currentPerson = persons.filter(person => person.name === newName);\n    console.log(\"Is in array already: \",currentPerson)\n\n    if (currentPerson.length > 0) {\n      const result = window.confirm(`${newName} is already added to phonebook, replace the old number with a new one?`)\n\n      if (result === true) {\n        console.log(\"Update old object\")\n        const oldId = currentPerson[0].id\n        const changedPerson = { ...currentPerson[0], number: newNumber }\n\n        personService\n          .update(oldId, changedPerson)\n            .then(returnedPerson => {        \n              setPersons(persons.map(person => person.id !== oldId ? person : returnedPerson))   \n              setNotificationType(\"notification\")  \n              setNotificationMessage(          \n                `Updated ${returnedPerson.name}`        \n              )   \n              setTimeout(() => {          \n                setNotificationMessage(null)        \n              }, 5000)  \n            }) \n          .catch(error => {    \n            showError(changedPerson)  \n          })\n\n        return\n\n      } else {\n        return\n      }\n    }\n\n    const personObject = { \n      name: newName,\n      number: newNumber,\n    } \n    \n    personService\n      .create(personObject)\n        .then(returnedPerson => {        \n          setPersons(persons.concat(returnedPerson))  \n          setNewName('') \n          setNewNumber('') \n          setNotificationType(\"notification\")  \n          setNotificationMessage(          \n            `Added ${returnedPerson.name}`        \n          )  \n          setTimeout(() => {          \n            setNotificationMessage(null)        \n          }, 5000)  \n    })\n  }\n\n  const handleNameChange = (event) => {    \n    console.log(event.target.value)    \n    setNewName(event.target.value)  \n  }\n\n  const handleNumberChange = (event) => {    \n    console.log(event.target.value)    \n    setNewNumber(event.target.value)  \n  }\n\n  const handleSearchStringChange = (event) => {    \n    console.log(event.target.value)    \n    setNewSearchString(event.target.value)  \n  }\n\n  const deletePerson = (id) => {\n    console.log(`Remove object with id ${id}`)\n    const person = persons.find(person => person.id === id)\n\n    const result = window.confirm(`Delete ${person.name}`);\n    console.log(result)\n\n    if (result === true) {\n      personService\n        .remove(id)\n          .then(() => {   \n            const removedPerson = persons.filter(person => person.id === id)\n            console.log(removedPerson)\n            setPersons(persons.filter(person => person.id !== id))    \n            setNotificationType(\"notification\")  \n            setNotificationMessage(          \n              `Deleted ${removedPerson[0].name}`        \n            )  \n            setTimeout(() => {          \n              setNotificationMessage(null)        \n            }, 5000) \n          })  \n    }\n  }\n\n  const personsToShow = newSearchString    \n  ? persons.filter(person => person.name.toLowerCase().includes(newSearchString.toLowerCase()))    \n  : persons\n \n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMessage} className={notificationType} />\n      <Filter \n        key=\"SearchFilter\" \n        newSearchString={newSearchString} \n        handleSearchStringChange={handleSearchStringChange} \n      />\n      <h2>Add a new</h2>\n      <PersonForm \n        key=\"PersonForm\" \n        newName={newName} \n        handleNameChange={handleNameChange} \n        newNumber={newNumber} \n        handleNumberChange={handleNumberChange} \n        addPerson={addPerson} \n      />\n      <h2>Numbers</h2>\n      <Persons \n        key=\"Persons\" \n        personsToShow={personsToShow}\n        deletePerson={deletePerson}\n      />\n    </div>\n  )\n\n}\n\nexport default App\n","import ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}