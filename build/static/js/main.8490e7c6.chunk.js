(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{41:function(e,n,t){},42:function(e,n,t){"use strict";t.r(n);var o=t(17),c=t.n(o),r=t(8),a=t(3),i=t(1),u=t(0),l=function(e){var n=e.person,t=e.deletePerson;return Object(u.jsxs)("p",{children:[n.name," ",n.number,Object(u.jsx)("button",{onClick:t,children:"Delete"})]})},s=function(e){var n=e.personsToShow,t=e.deletePerson;return Object(u.jsx)("div",{children:n.map((function(e){return Object(u.jsx)(l,{person:e,deletePerson:function(){return t(e.id)}},e.name)}))})},d=function(e){var n=e.newSearchString,t=e.handleSearchStringChange;return Object(u.jsxs)("div",{children:["Filter shown with ",Object(u.jsx)("input",{value:n,onChange:t})]})},j=function(e){var n=e.newName,t=e.handleNameChange,o=e.newNumber,c=e.handleNumberChange,r=e.addPerson;return Object(u.jsxs)("form",{onSubmit:r,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:n,onChange:t})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:o,onChange:c})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},h=function(e){var n=e.message,t=e.className;return null===n?null:Object(u.jsx)("div",{className:t,children:n})},b=t(4),f=t.n(b),m="/api/persons",O=function(){return f.a.get(m).then((function(e){return e.data}))},g=function(e){return f.a.post(m,e).then((function(e){return e.data}))},v=function(e){return f.a.delete("".concat(m,"/").concat(e)).then((function(e){return e.data}))},p=function(e,n){return f.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},w=function(){var e=Object(i.useState)([]),n=Object(a.a)(e,2),t=n[0],o=n[1],c=Object(i.useState)(""),l=Object(a.a)(c,2),b=l[0],f=l[1],m=Object(i.useState)(""),w=Object(a.a)(m,2),x=w[0],S=w[1],C=Object(i.useState)(""),N=Object(a.a)(C,2),P=N[0],k=N[1],y=Object(i.useState)(""),T=Object(a.a)(y,2),D=T[0],A=T[1],E=Object(i.useState)(""),F=Object(a.a)(E,2),I=F[0],J=F[1];Object(i.useEffect)((function(){O().then((function(e){o(e)}))}),[]),console.log("render",t.length,"persons");var L=P?t.filter((function(e){return e.name.toLowerCase().includes(P.toLowerCase())})):t;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(h,{message:D,className:I}),Object(u.jsx)(d,{newSearchString:P,handleSearchStringChange:function(e){console.log(e.target.value),k(e.target.value)}},"SearchFilter"),Object(u.jsx)("h2",{children:"Add a new"}),Object(u.jsx)(j,{newName:b,handleNameChange:function(e){console.log(e.target.value),f(e.target.value)},newNumber:x,handleNumberChange:function(e){console.log(e.target.value),S(e.target.value)},addPerson:function(e){e.preventDefault(),console.log("Add button clicked",e.target);var n=t.filter((function(e){return e.name===b}));if(console.log("Is in array already: ",n),n.length>0){if(!0===window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){console.log("Update old object");var c=n[0].id,a=Object(r.a)(Object(r.a)({},n[0]),{},{number:x});return void p(c,a).then((function(e){o(t.map((function(n){return n.id!==c?n:e}))),J("notification"),A("Updated ".concat(e.name)),setTimeout((function(){A(null)}),5e3)})).catch((function(e){var n;n=a,console.log("Error, failed to update object with id ",n.id),J("error"),A("Information of ".concat(n.name," was already removed from server")),setTimeout((function(){A(null)}),5e3)}))}}else g({name:b,number:x}).then((function(e){o(t.concat(e)),f(""),S(""),J("notification"),A("Added ".concat(e.name)),setTimeout((function(){A(null)}),5e3)}))}},"PersonForm"),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(s,{personsToShow:L,deletePerson:function(e){console.log("Remove object with id ".concat(e));var n=t.find((function(n){return n.id===e})),c=window.confirm("Delete ".concat(n.name));console.log(c),!0===c&&v(e).then((function(){var n=t.filter((function(n){return n.id===e}));console.log(n),o(t.filter((function(n){return n.id!==e}))),J("notification"),A("Deleted ".concat(n[0].name)),setTimeout((function(){A(null)}),5e3)}))}},"Persons")]})};t(41);c.a.render(Object(u.jsx)(w,{}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.8490e7c6.chunk.js.map